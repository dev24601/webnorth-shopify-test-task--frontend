{%- unless skip_styles -%}
  {{ 'webnorth-card-product.css' | asset_url | stylesheet_tag }}
{%- endunless -%}

<a
  class="webnorth-card-product"
  href="{{ product.url }}"
  {% if open_in_new_tab %}
    target="_blank"
  {% endif %}
>
  <div class="webnorth-card-product--image">
    {% if product.featured_media != blank %}
      <img
        srcset="
          {%- if product.featured_media.width >= 165 -%}{{ product.featured_media | image_url: width: 165 }} 165w,{%- endif -%}
          {%- if product.featured_media.width >= 360 -%}{{ product.featured_media | image_url: width: 360 }} 360w,{%- endif -%}
          {%- if product.featured_media.width >= 533 -%}{{ product.featured_media | image_url: width: 533 }} 533w,{%- endif -%}
          {%- if product.featured_media.width >= 720 -%}{{ product.featured_media | image_url: width: 720 }} 720w,{%- endif -%}
          {{ product.featured_media | image_url }} {{ product.featured_media.width }}w
        "
        src="{{ product.featured_media | image_url: width: 360 }}"
        sizes="(min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 130 | divided_by: 4 }}px, (min-width: 990px) calc((100vw - 130px) / 4), (min-width: 750px) calc((100vw - 120px) / 3), calc((100vw - 35px) / 2)"
        alt="{{ product.featured_media.alt | escape }}"
        {% unless lazy_load == false %}
          loading="lazy"
        {% endunless %}
        width="100%"
        height="100%"
      >
    {% endif %}
  </div>

  <div class="webnorth-card-product--info">
    {% if product.title != blank %}
      <h3 class="webnorth-card-product--title" title="{{ product.title }}">{{ product.title }}</h3>
    {% endif %}

    {% if product.price != blank %}
      <div class="webnorth-card-product--price">
        <span>{{ product.price | money_without_trailing_zeros }}</span>
      </div>
    {% endif %}

    {% if product.description != blank %}
      <div class="webnorth-card-product--description">
        {{ product.description }}
      </div>
    {% endif %}

    {% if columns == 'three' %}
      <hr class="webnorth-card-product--divider">
      <ul class="webnorth-card-product--tags-list">
        {% for tag in product.tags limit: 2 -%}
          <li>
            {{ tag }}
          </li>
        {%- endfor %}
        {% if product.tags.size > 2 %}
          <li>+{{ product.tags.size | minus: 2 }}</li>
        {% endif %}
      </ul>
    {% endif %}

    <form class="webnorth-card-product--add-to-cart" method="post" action="/cart/add">
      <input type="hidden" name="id" value="{{ product.variants.first.id }}">
      <input type="hidden" name="quantity" value="1">
      <button type="submit" class="button-primary">
        <span>Add to cart</span>
      </button>
    </form>
  </div>
</a>
